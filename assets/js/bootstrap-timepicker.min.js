(function(a,b,c,d){'use strict';var f=function(g,h){this.widget='',this.$element=a(g),this.defaultTime=h.defaultTime,this.disableFocus=h.disableFocus,this.isOpen=h.isOpen,this.minuteStep=h.minuteStep,this.modalBackdrop=h.modalBackdrop,this.secondStep=h.secondStep,this.showInputs=h.showInputs,this.showMeridian=h.showMeridian,this.showSeconds=h.showSeconds,this.template=h.template,this.appendWidgetTo=h.appendWidgetTo,this.upArrowStyle=h.upArrowStyle,this.downArrowStyle=h.downArrowStyle,this.containerClass=h.containerClass,this.snapToStep=h.snapToStep,this._init()};f.prototype={constructor:f,_init:function(){var g=this;this.$element.parent().hasClass('bootstrap-timepicker')?(this.$element.parent('.bootstrap-timepicker').find('.picker').length?this.$element.parent('.bootstrap-timepicker').find('.picker').on({'click.timepicker':a.proxy(this.showWidget,this)}):this.$element.closest(this.containerClass).find('.input-group-addon').on({'click.timepicker':a.proxy(this.showWidget,this)}),this.$element.on({'focus.timepicker':a.proxy(this.highlightUnit,this),'click.timepicker':a.proxy(this.highlightUnit,this),'keydown.timepicker':a.proxy(this.elementKeydown,this),'blur.timepicker':a.proxy(this.blurElement,this)})):this.template?this.$element.on({'focus.timepicker':a.proxy(this.showWidget,this),'click.timepicker':a.proxy(this.showWidget,this),'blur.timepicker':a.proxy(this.blurElement,this)}):this.$element.on({'focus.timepicker':a.proxy(this.highlightUnit,this),'click.timepicker':a.proxy(this.highlightUnit,this),'keydown.timepicker':a.proxy(this.elementKeydown,this),'blur.timepicker':a.proxy(this.blurElement,this)}),this.$widget=!1!==this.template&&a(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on('click',a.proxy(this.widgetClick,this)),this.showInputs&&!1!==this.$widget&&this.$widget.find('input').each(function(){a(this).on({'click.timepicker':function(){a(this).select()},'keydown.timepicker':a.proxy(g.widgetKeydown,g)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=d,this.updateFromElementVal()},decrementHour:function(){if(!this.showMeridian)0===this.hour?this.hour=23:this.hour--;else if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}this.update()},decrementMinute:function(g){var h;h=g?this.minute-g:this.minute-this.minuteStep,0>h?(this.decrementHour(),this.minute=h+60):this.minute=h,this.update()},decrementSecond:function(){var g=this.second-this.secondStep;0>g?(this.decrementMinute(!0),this.second=g+60):this.second=g,this.update()},elementKeydown:function(g){switch(g.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case'hour':g.preventDefault(),this.highlightNextUnit();break;case'minute':(this.showMeridian||this.showSeconds)&&(g.preventDefault(),this.highlightNextUnit());break;case'second':this.showMeridian&&(g.preventDefault(),this.highlightNextUnit());}break;case 27:this.updateFromElementVal();break;case 37:g.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(g.preventDefault(),this.highlightedUnit){case'hour':this.incrementHour(),this.highlightHour();break;case'minute':this.incrementMinute(),this.highlightMinute();break;case'second':this.incrementSecond(),this.highlightSecond();break;case'meridian':this.toggleMeridian(),this.highlightMeridian();}break;case 39:g.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(g.preventDefault(),this.highlightedUnit){case'hour':this.decrementHour(),this.highlightHour();break;case'minute':this.decrementMinute(),this.highlightMinute();break;case'second':this.decrementSecond(),this.highlightSecond();break;case'meridian':this.toggleMeridian(),this.highlightMeridian();}}},formatTime:function(g,h,i,j){return g=10>g?'0'+g:g,h=10>h?'0'+h:h,i=10>i?'0'+i:i,g+':'+h+(this.showSeconds?':'+i:'')+(this.showMeridian?' '+j:'')},getCursorPosition:function(){var g=this.$element.get(0);if('selectionStart'in g)return g.selectionStart;if(c.selection){g.focus();var h=c.selection.createRange(),i=c.selection.createRange().text.length;return h.moveStart('character',-g.value.length),h.text.length-i}},getTemplate:function(){var g,h,i,j,k,l;switch(this.showInputs?(h='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',i='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',j='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',k='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):(h='<span class="bootstrap-timepicker-hour"></span>',i='<span class="bootstrap-timepicker-minute"></span>',j='<span class="bootstrap-timepicker-second"></span>',k='<span class="bootstrap-timepicker-meridian"></span>'),l='<table><tr><td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="'+this.upArrowStyle+'"></i></a></td>':'')+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"></i></a></td>':'')+'</tr><tr><td>'+h+'</td> <td class="separator">:</td><td>'+i+'</td> '+(this.showSeconds?'<td class="separator">:</td><td>'+j+'</td>':'')+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+k+'</td>':'')+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+'"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"></i></a></td>':'')+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"></i></a></td>':'')+'</tr></table>',this.template){case'modal':g='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?'true':'false')+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">\xD7</a><h3>Pick a Time</h3></div><div class="modal-content">'+l+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case'dropdown':g='<div class="bootstrap-timepicker-widget dropdown-menu">'+l+'</div>';}return g},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){!1===this.isOpen||(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:'hide.timepicker',time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),'modal'===this.template&&this.$widget.modal?this.$widget.modal('hide'):this.$widget.removeClass('open'),a(c).off('mousedown.timepicker'),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition(),0<=this.position&&2>=this.position?this.highlightHour():3<=this.position&&5>=this.position?this.highlightMinute():6<=this.position&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():9<=this.position&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case'hour':this.highlightMinute();break;case'minute':this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case'second':this.showMeridian?this.highlightMeridian():this.highlightHour();break;case'meridian':this.highlightHour();}},highlightPrevUnit:function(){switch(this.highlightedUnit){case'hour':this.highlightMeridian();break;case'minute':this.highlightHour();break;case'second':this.highlightMinute();break;case'meridian':this.showSeconds?this.highlightSecond():this.highlightMinute();}},highlightHour:function(){var g=this.$element.get(0);this.highlightedUnit='hour',g.setSelectionRange&&setTimeout(function(){g.setSelectionRange(0,2)},0)},highlightMinute:function(){var g=this.$element.get(0);this.highlightedUnit='minute',g.setSelectionRange&&setTimeout(function(){g.setSelectionRange(3,5)},0)},highlightSecond:function(){var g=this.$element.get(0);this.highlightedUnit='second',g.setSelectionRange&&setTimeout(function(){g.setSelectionRange(6,8)},0)},highlightMeridian:function(){var g=this.$element.get(0);this.highlightedUnit='meridian',g.setSelectionRange&&(this.showSeconds?setTimeout(function(){g.setSelectionRange(9,11)},0):setTimeout(function(){g.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return 23===this.hour?void(this.hour=0):void(this.hour++,this.update())},incrementMinute:function(g){var h;h=g?this.minute+g:this.minute+this.minuteStep-this.minute%this.minuteStep,59<h?(this.incrementHour(),this.minute=h-60):this.minute=h,this.update()},incrementSecond:function(){var g=this.second+this.secondStep-this.second%this.secondStep;59<g?(this.incrementMinute(!0),this.second=g-60):this.second=g,this.update()},remove:function(){a('document').off('.timepicker'),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(g){if(!!this.$element.val())this.updateFromElementVal();else if('current'===g){var h=new Date,i=h.getHours(),j=Math.floor(h.getMinutes()/this.minuteStep)*this.minuteStep,k=Math.floor(h.getSeconds()/this.secondStep)*this.secondStep,l='AM';this.showMeridian&&(0===i?i=12:12<=i?(12<i&&(i-=12),l='PM'):l='AM'),this.hour=i,this.minute=j,this.second=k,this.meridian=l,this.update(!0)}else!1===g?(this.hour=0,this.minute=0,this.second=0,this.meridian='AM'):this.setTime(g)},clear:function(){this.hour='',this.minute='',this.second='',this.meridian='',this.$element.val('')},setTime:function(g){if(!g)return void this.clear();var h,i;this.showMeridian?(h=g.split(' '),i=h[0].split(':'),this.meridian=h[1]):i=g.split(':'),this.hour=parseInt(i[0],10),this.minute=parseInt(i[1],10),this.second=parseInt(i[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(12<this.hour?this.hour=12:1>this.hour&&(this.hour=12),'am'===this.meridian||'a'===this.meridian?this.meridian='AM':('pm'===this.meridian||'p'===this.meridian)&&(this.meridian='PM'),'AM'!==this.meridian&&'PM'!==this.meridian&&(this.meridian='AM')):24<=this.hour?this.hour=23:0>this.hour&&(this.hour=0),0>this.minute?this.minute=0:60<=this.minute&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:0>this.second?this.second=0:60<=this.second&&(this.second=59)),this.snapToStep&&(this.minute=this.changeToNearestStep(this.minute,this.minuteStep)),this.update()},changeToNearestStep:function(g,h){return 0==g%h?g:Math.round(g%h/h)?(g+(h-g%h))%60:g-g%h},showWidget:function(){if(!this.isOpen&&!this.$element.is(':disabled')){var g=this;a(c).on('mousedown.timepicker',function(h){0===a(h.target).closest('.bootstrap-timepicker-widget').length&&g.hideWidget()}),this.$element.trigger({type:'show.timepicker',time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),'modal'===this.template&&this.$widget.modal?this.$widget.modal('show').on('hidden',a.proxy(this.hideWidget,this)):!1===this.isOpen&&this.$widget.addClass('open'),this.isOpen=!0}},toggleMeridian:function(){this.meridian='AM'===this.meridian?'PM':'AM',this.update()},update:function(g){this.$element.trigger({type:'changeTime.timepicker',time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(g),this.updateWidget()},updateElement:function(g){var h=this.$element;h.val(this.getTime()),g||h.change()},updateFromElementVal:function(){var g=this.$element.val();g&&this.setTime(g)},updateWidget:function(){if(!1!==this.$widget){var g=10>this.hour?'0'+this.hour:this.hour,h=10>this.minute?'0'+this.minute:this.minute,i=10>this.second?'0'+this.second:this.second;this.showInputs?(this.$widget.find('input.bootstrap-timepicker-hour').val(g),this.$widget.find('input.bootstrap-timepicker-minute').val(h),this.showSeconds&&this.$widget.find('input.bootstrap-timepicker-second').val(i),this.showMeridian&&this.$widget.find('input.bootstrap-timepicker-meridian').val(this.meridian)):(this.$widget.find('span.bootstrap-timepicker-hour').text(g),this.$widget.find('span.bootstrap-timepicker-minute').text(h),this.showSeconds&&this.$widget.find('span.bootstrap-timepicker-second').text(i),this.showMeridian&&this.$widget.find('span.bootstrap-timepicker-meridian').text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var g=a('input.bootstrap-timepicker-hour',this.$widget).val()+':'+a('input.bootstrap-timepicker-minute',this.$widget).val()+(this.showSeconds?':'+a('input.bootstrap-timepicker-second',this.$widget).val():'')+(this.showMeridian?' '+a('input.bootstrap-timepicker-meridian',this.$widget).val():'');this.setTime(g)}},widgetClick:function(g){g.stopPropagation(),g.preventDefault();var h=a(g.target).closest('a').data('action');h&&this[h]()},widgetKeydown:function(g){var h=a(g.target).closest('input'),i=h.attr('name');switch(g.keyCode){case 9:if(this.showMeridian){if('meridian'===i)return this.hideWidget();}else if(this.showSeconds){if('second'===i)return this.hideWidget();}else if('minute'===i)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:g.preventDefault();'hour'===i?this.incrementHour():'minute'===i?this.incrementMinute():'second'===i?this.incrementSecond():'meridian'===i?this.toggleMeridian():void 0;break;case 40:g.preventDefault();'hour'===i?this.decrementHour():'minute'===i?this.decrementMinute():'second'===i?this.decrementSecond():'meridian'===i?this.toggleMeridian():void 0;}}},a.fn.timepicker=function(g){var h=Array.apply(null,arguments);return h.shift(),this.each(function(){var i=a(this),j=i.data('timepicker');j||i.data('timepicker',j=new f(this,a.extend({},a.fn.timepicker.defaults,'object'==typeof g&&g,a(this).data()))),'string'==typeof g&&j[g].apply(j,h)})},a.fn.timepicker.defaults={defaultTime:'current',disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:'dropdown',appendWidgetTo:'.bootstrap-timepicker',upArrowStyle:'glyphicon glyphicon-chevron-up',downArrowStyle:'glyphicon glyphicon-chevron-down',containerClass:'bootstrap-timepicker'},a.fn.timepicker.Constructor=f})(jQuery,window,document);